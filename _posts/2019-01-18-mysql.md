---
layout: post
title:  "Mysql"
tags:
categories:
---

### 创建数据库
- create database my_test character set utf8;

- show databases; 
### 创建表
- use my_test; 
- create table 表名(id int,name varchar(25),email varchar(255));
- show tables;
 
### 插入数据
 - 单行数据
   - insert into 表名 (列名1,列名1) values (列值1,列值1);
 - 批量插入 
   - insert into 表名 (列名1,列名1) values (列值1,列值1),(列值1,列值1);
 - 注意：顺序一一对应、值不要超出定义的长度
 
### 跟新操作
 - update 表名 set 列名1=列值1,列名2=列值2 ... where 列名=值;
 - 在原来的基础上修改值
   - update 表名 set age=age+1 where 列名=值; 
   
### 删除操作
- delete from 表名 [where 列名=值];
- truncate table 表名;
- delete与truncate的区别
    - delete删除表中的数据、表结构还在；删除后的数据还可以找回
    - truncate删除是吧表直接drop掉，然后在创建一个同样的新表。
       删除的数据不能找回，执行速度比delete块 
       
### 查询数据
- select * from [where 列名=值];
- select 列名1,列名2 from [where 列名=值];
- where 条件
   - and 、 or 、 between and、  is null、is not null、in(set)
   - =   !=  <>  < > <= > >=;
```javascript
//查询学号为101 102 103的记录
select * from student where id=101 or id=102 or id=103;
select * from student where id in(101,102,103);

//查询姓名为null的记录
select * from student where name is null;

//查询姓名不为null的记录
select * from student where name is not null;

//查询性别为非男的记录
select * from student where gender !='男';

//查询年龄在18到20的记录
select * from student age>=18 and age<=20;
select * from student between 18 and 20;

```

### 模糊查询
- 使用like关键字后跟通配符
- 通配符 
  -  `_`: 任意一个字符
  - `%` : 任意0-n个字符

```javascript
// 查询姓名由五个字母构成的学生记录
select * from student where name like '_____'; // (五个 '_')

// 查询姓名由五个字母构成并且第五个字母为's'的学生记录
select * from student where name like '____s'; // (四个 '_')

//查询姓名以“m”开头的学生记录
select * from student where name like 'm%';

//查询姓名中第二个字母为“u”开头的学生记录
select * from student where name like '_u%';

//查询姓名中包含'李'的学生记录
select * from student where name like '%李%'; 

```

###  字段控制查询
- 去除重复记录 `select distinct name from student`;
 
### 排序
- `order by`
  -  升序 asc (从小到大) 默认
  - 降序 desc  

```javascript
//按薪资排序
 select * from student order by desc; 

//按薪资和id排序
 select * from student order by salary desc , id desc;
 
```

### 聚合函数
- count() 统计指定列部位null的记录行数
- max();计算指定列的最大值，如果指定类型是字符串类型，那么使用字符串排序运算
- min();计算指定列的最小值，如果指定类型是字符串类型，那么使用字符串排序运算
- sum();计算指定列的数值和，如果指定类型不是数值类型，那么计算结果为0
- avg(); 计算指定列的平均值，如果指定类型不是数值类型，那么计算结果为0

```javascript

//查询表记录数
select count(*) as total from student;

//查询有绩效的人数
select count(salay) from student;

```
